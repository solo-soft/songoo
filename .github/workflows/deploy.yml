name: Deploy Next.js App

on:
  push:
    branches:
      - main # Change this to your main branch name

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Set up Node.js
        uses: actions/setup-node@v2
        with:
          node-version: 14

      - name: Install dependencies
        run: npm install

      - name: Build Next.js app
        run: npm run build

      - name: Deploy to GitHub Pages
        run: |
          git config --global user.email "rezaeiism@yahoo.com"
          git config --global user.name "isrezaei"
          git checkout --orphan gh-pages
          cp -r ./out/* .
          git add .
          git commit -m "Deploy to GitHub Pages"
          git push origin gh-pages --force
        env:
          NEXT_PUBLIC_BASE_URL : http://localhost:3000
          NEXT_PUBLIC_SPOTIFY_CLIENT_ID: d6ff4227223a46c0aacc733d61205aee
          NEXT_PUBLIC_SPOTIFY_CLIENT_SECRET: 778165ea9962412f8d60f5f570c5c410
          NEXT_PUBLIC_SPOTIFY_REFRESH_TOKEN : AQAx-H2CwsOheHZy4tB-fAONbV6crOAGRKmI39JZPRfjie7Po41D8cuo4BageAG0Md85YaCVhFfv1PTilDjFstpWxsCxzsJ2bJVfAikeUpkqrFNfyC7QcjIBfZbMXvDOLtpjEvnZ06kXDC_3lZrUcIccYc8q0-cX640gSeRyP3AqoPkdKoXLj0Uc-j43RQ
          NEXT_PUBLIC_SPOTIFY_SCRAPER_KEY : 3cec8d8c46msha90ce5b12fd7ab4p168338jsn8fdd68f47d24
          NEXT_PUBLIC_SUPABASE_KEY : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhbWl6d3BhcXBrYnp1cWV2YWhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzY0NjUwNTMsImV4cCI6MTk5MjA0MTA1M30.c0lOyaX3u0-otvKzIZOES7Wm7NWJ1xfMnpNYNWyMMDY
          NEXT_PUBLIC_SUPABASE_URL : https://wamizwpaqpkbzuqevahn.supabase.co
          SECRET_KEY : 19LCJ1c2VyX21ldGFkYXRhIjp7fSwicm9sZSI6ImF1dGhlbn
